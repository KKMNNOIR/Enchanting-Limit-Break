execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:bane_of_arthropods"}].lvl short 1 if score @s BaneOfArthropods matches 1..10 run scoreboard players get @s BaneOfArthropods
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:blast_protection"}].lvl short 1 if score @s BlastProtection matches 1..10 run scoreboard players get @s BlastProtection
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:efficiency"}].lvl short 1 if score @s Efficiency matches 1..10 run scoreboard players get @s Efficiency
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:feather_falling"}].lvl short 1 if score @s FeatherFalling matches 1..10 run scoreboard players get @s FeatherFalling
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:fire_protection"}].lvl short 1 if score @s FireProtection matches 1..10 run scoreboard players get @s FireProtection
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:fortune"}].lvl short 1 if score @s Fortune matches 1..10 run scoreboard players get @s Fortune
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:impaling"}].lvl short 1 unless score @s Riptide matches 1.. if score @s Impaling matches 1..10 run scoreboard players get @s Impaling
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:knockback"}].lvl short 1 if score @s Knockback matches 1..10 run scoreboard players get @s Knockback
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:looting"}].lvl short 1 if score @s Looting matches 1..10 run scoreboard players get @s Looting
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:luck_of_the_sea"}].lvl short 1 if score @s LuckOfTheSea matches 1..10 run scoreboard players get @s LuckOfTheSea
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:lure"}].lvl short 1 if score @s Lure matches 1..10 run scoreboard players get @s Lure
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:piercing"}].lvl short 1 if score @s Piercing matches 1..10 run scoreboard players get @s Piercing
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:power"}].lvl short 1 if score @s Power matches 1..10 run scoreboard players get @s Power
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:projectile_protection"}].lvl short 1 if score @s P.Protection matches 1..10 run scoreboard players get @s P.Protection
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:protection"}].lvl short 1 if score @s Protection matches 1..10 run scoreboard players get @s Protection
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:punch"}].lvl short 1 if score @s Punch matches 1..10 run scoreboard players get @s Punch
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:quick_charge"}].lvl short 1 if score @s QuickCharge matches 1..10 run scoreboard players get @s QuickCharge
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:respiration"}].lvl short 1 if score s Respiration matches 1..10 run scoreboard players get @s Respiration
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:sharpness"}].lvl short 1 if score @s Sharpness matches 1..10 run scoreboard players get @s Sharpness
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:smite"}].lvl short 1 if score @s Smite matches 1..10 run scoreboard players get @s Smite
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:thorns"}].lvl short 1 if score @s Thorns matches 1..10 run scoreboard players get @s Thorns
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:unbreaking"}].lvl short 1 if score @s Unbreaking matches 1..10 run scoreboard players get @s Unbreaking
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:depth_strider"}].lvl short 1 if score @s DepthStrider matches 1..3 run scoreboard players get @s DepthStrider
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:fire_aspect"}].lvl short 1 if score @s FireAspect matches 1..2 run scoreboard players get @s FireAspect
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:frost_walker"}].lvl short 1 if score @s FrostWalker matches 1..2 run scoreboard players get @s FrostWalker
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:loyalty"}].lvl short 1 if score @s Loyalty matches 1..3 run scoreboard players get @s Loyalty
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:riptide"}].lvl short 1 unless score @s Impaling matches 1.. if score @s Riptide matches 1..3 run scoreboard players get @s Riptide
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:riptide"}].lvl short 1 unless score @s Loyalty matches 1.. if score @s Riptide matches 1..3 run scoreboard players get @s Riptide
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:riptide"}].lvl short 1 unless score @s Channeling matches 1.. if score @s Riptide matches 1..3 run scoreboard players get @s Riptide
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:sweeping"}].lvl short 1 if score @s Sweeping matches 1..3 run scoreboard players get @s Sweeping
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:aqua_affinity"}].lvl short 1 if score @s AquaAffinity matches 1 run scoreboard players get @s AquaAffinity
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:channeling"}].lvl short 1 unless score @s Riptide matches 1.. if score @s Channeling matches 1..2 run scoreboard players get @s Channeling
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:flame"}].lvl short 1 if score @s Flame matches 1 run scoreboard players get @s Flame
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:infinity"}].lvl short 1 if score @s Infinity matches 1 run scoreboard players get @s Infinity
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:mending"}].lvl short 1 if score @s Mending matches 1 run scoreboard players get @s Mending
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:multishot"}].lvl short 1 if score @s Multishot matches 1 run scoreboard players get @s Multishot
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:silk_touch"}].lvl short 1 if score @s SilkTouch matches 1 run scoreboard players get @s SilkTouch
execute store result entity @s Item.tag.StoredEnchantments[{id:"minecraft:soul_speed"}].lvl short 1 if score @s SoulSpeed matches 1..10 run scoreboard players get @s SoulSpeed

scoreboard players reset * BaneOfArthropods
scoreboard players reset * BlastProtection
scoreboard players reset * Efficiency
scoreboard players reset * FeatherFalling
scoreboard players reset * FireProtection
scoreboard players reset * Fortune
scoreboard players reset * Impaling
scoreboard players reset * Knockback
scoreboard players reset * Looting
scoreboard players reset * LuckOfTheSea
scoreboard players reset * Lure
scoreboard players reset * Piercing
scoreboard players reset * Power
scoreboard players reset * P.Protection
scoreboard players reset * Protection
scoreboard players reset * Punch
scoreboard players reset * QuickCharge
scoreboard players reset * Respiration
scoreboard players reset * Sharpness
scoreboard players reset * Smite
scoreboard players reset * Thorns
scoreboard players reset * Unbreaking
scoreboard players reset * DepthStrider
scoreboard players reset * FireAspect
scoreboard players reset * FrostWalker
scoreboard players reset * Loyalty
scoreboard players reset * Riptide
scoreboard players reset * Sweeping
scoreboard players reset * AquaAffinity
scoreboard players reset * Channeling
scoreboard players reset * Flame
scoreboard players reset * Infinity
scoreboard players reset * Mending
scoreboard players reset * Multishot
scoreboard players reset * SilkTouch
scoreboard players reset * SoulSpeed

execute as @e[tag=ench_to] at @s run function ench_limit_break:success
execute as @s[tag=ench_to] run kill @e[nbt={Item:{tag:{StoredEnchantments:[{}]}}},limit=1,sort=nearest,distance=..1,tag=!ench_to]
execute if entity @s[nbt={Item:{tag:{StoredEnchantments:[]}}}] run data remove entity @s Item.tag.StoredEnchantments