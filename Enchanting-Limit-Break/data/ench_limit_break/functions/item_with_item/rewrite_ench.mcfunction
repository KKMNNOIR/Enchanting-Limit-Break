execute store result entity @s[predicate=ench_limit_break:max_levels/bane_of_arthropods] Item.tag.Enchantments[{id:"minecraft:bane_of_arthropods"}].lvl short 1 run scoreboard players get @s BaneOfArthropods
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/bane_of_arthropods] Item.tag.Enchantments[{id:"minecraft:bane_of_arthropods"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/blast_protection] Item.tag.Enchantments[{id:"minecraft:blast_protection"}].lvl short 1 run scoreboard players get @s BlastProtection
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/blast_protection] Item.tag.Enchantments[{id:"minecraft:blast_protection"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/efficiency] Item.tag.Enchantments[{id:"minecraft:efficiency"}].lvl short 1 run scoreboard players get @s Efficiency
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/efficiency] Item.tag.Enchantments[{id:"minecraft:efficiency"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/feather_falling] Item.tag.Enchantments[{id:"minecraft:feather_falling"}].lvl short 1 run scoreboard players get @s FeatherFalling
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/feather_falling] Item.tag.Enchantments[{id:"minecraft:feather_falling"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/fire_protection] Item.tag.Enchantments[{id:"minecraft:fire_protection"}].lvl short 1 run scoreboard players get @s FireProtection
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/fire_protection] Item.tag.Enchantments[{id:"minecraft:fire_protection"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/fortune] Item.tag.Enchantments[{id:"minecraft:fortune"}].lvl short 1 run scoreboard players get @s Fortune
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/fortune] Item.tag.Enchantments[{id:"minecraft:fortune"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/impaling,predicate=ench_limit_break:not_riptide] Item.tag.Enchantments[{id:"minecraft:impaling"}].lvl short 1 run scoreboard players get @s Impaling
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/impaling,predicate=ench_limit_break:not_riptide] Item.tag.Enchantments[{id:"minecraft:impaling"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/knockback] Item.tag.Enchantments[{id:"minecraft:knockback"}].lvl short 1 run scoreboard players get @s Knockback
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/knockback] Item.tag.Enchantments[{id:"minecraft:knockback"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/looting] Item.tag.Enchantments[{id:"minecraft:looting"}].lvl short 1 run scoreboard players get @s Looting
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/looting] Item.tag.Enchantments[{id:"minecraft:looting"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/luck_of_the_sea] Item.tag.Enchantments[{id:"minecraft:luck_of_the_sea"}].lvl short 1 run scoreboard players get @s LuckOfTheSea
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/luck_of_the_sea] Item.tag.Enchantments[{id:"minecraft:luck_of_the_sea"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/lure] Item.tag.Enchantments[{id:"minecraft:lure"}].lvl short 1 run scoreboard players get @s Lure
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/lure] Item.tag.Enchantments[{id:"minecraft:lure"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/piercing] Item.tag.Enchantments[{id:"minecraft:piercing"}].lvl short 1 run scoreboard players get @s Piercing
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/piercing] Item.tag.Enchantments[{id:"minecraft:piercing"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/power] Item.tag.Enchantments[{id:"minecraft:power"}].lvl short 1 run scoreboard players get @s Power
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/power] Item.tag.Enchantments[{id:"minecraft:power"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/projectile_protection] Item.tag.Enchantments[{id:"minecraft:projectile_protection"}].lvl short 1 run scoreboard players get @s P.Protection
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/projectile_protection] Item.tag.Enchantments[{id:"minecraft:projectile_protection"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/protection] Item.tag.Enchantments[{id:"minecraft:protection"}].lvl short 1 run scoreboard players get @s Protection
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/protection] Item.tag.Enchantments[{id:"minecraft:protection"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/punch] Item.tag.Enchantments[{id:"minecraft:punch"}].lvl short 1 run scoreboard players get @s Punch
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/punch] Item.tag.Enchantments[{id:"minecraft:punch"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/quick_charge] Item.tag.Enchantments[{id:"minecraft:quick_charge"}].lvl short 1 run scoreboard players get @s QuickCharge
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/quick_charge] Item.tag.Enchantments[{id:"minecraft:quick_charge"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/respiration] Item.tag.Enchantments[{id:"minecraft:respiration"}].lvl short 1 run scoreboard players get @s Respiration
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/respiration] Item.tag.Enchantments[{id:"minecraft:respiration"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/sharpness] Item.tag.Enchantments[{id:"minecraft:sharpness"}].lvl short 1 run scoreboard players get @s Sharpness
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/sharpness] Item.tag.Enchantments[{id:"minecraft:sharpness"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/smite] Item.tag.Enchantments[{id:"minecraft:smite"}].lvl short 1 run scoreboard players get @s Smite
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/smite] Item.tag.Enchantments[{id:"minecraft:smite"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/thorns] Item.tag.Enchantments[{id:"minecraft:thorns"}].lvl short 1 run scoreboard players get @s Thorns
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/thorns] Item.tag.Enchantments[{id:"minecraft:thorns"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/unbreaking] Item.tag.Enchantments[{id:"minecraft:unbreaking"}].lvl short 1 run scoreboard players get @s Unbreaking
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/unbreaking] Item.tag.Enchantments[{id:"minecraft:unbreaking"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/depth_strider] Item.tag.Enchantments[{id:"minecraft:depth_strider"}].lvl short 1 run scoreboard players get @s DepthStrider
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/depth_strider] Item.tag.Enchantments[{id:"minecraft:depth_strider"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/fire_aspect] Item.tag.Enchantments[{id:"minecraft:fire_aspect"}].lvl short 1 run scoreboard players get @s FireAspect
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/fire_aspect] Item.tag.Enchantments[{id:"minecraft:fire_aspect"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/frost_walker] Item.tag.Enchantments[{id:"minecraft:frost_walker"}].lvl short 1 run scoreboard players get @s FrostWalker
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/frost_walker] Item.tag.Enchantments[{id:"minecraft:frost_walker"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/loyalty] Item.tag.Enchantments[{id:"minecraft:loyalty"}].lvl short 1 run scoreboard players get @s Loyalty
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/loyalty] Item.tag.Enchantments[{id:"minecraft:loyalty"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/riptide,predicate=!ench_limit_break:trident/except_riptide] Item.tag.Enchantments[{id:"minecraft:riptide"}].lvl short 1 run scoreboard players get @s Riptide
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/riptide] Item.tag.Enchantments[{id:"minecraft:riptide"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/sweeping] Item.tag.Enchantments[{id:"minecraft:sweeping"}].lvl short 1 run scoreboard players get @s Sweeping
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/sweeping] Item.tag.Enchantments[{id:"minecraft:sweeping"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/aqua_affinity] Item.tag.Enchantments[{id:"minecraft:aqua_affinity"}].lvl short 1 run scoreboard players get @s AquaAffinity
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/aqua_affinity] Item.tag.Enchantments[{id:"minecraft:aqua_affinity"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/channeling,predicate=ench_limit_break:not_riptide] Item.tag.Enchantments[{id:"minecraft:channeling"}].lvl short 1 run scoreboard players get @s Channeling
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/channeling,predicate=ench_limit_break:not_riptide] Item.tag.Enchantments[{id:"minecraft:channeling"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/flame] Item.tag.Enchantments[{id:"minecraft:flame"}].lvl short 1 run scoreboard players get @s Flame
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/flame] Item.tag.Enchantments[{id:"minecraft:flame"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/infinity] Item.tag.Enchantments[{id:"minecraft:infinity"}].lvl short 1 run scoreboard players get @s Infinity
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/infinity] Item.tag.Enchantments[{id:"minecraft:infinity"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/mending] Item.tag.Enchantments[{id:"minecraft:mending"}].lvl short 1 run scoreboard players get @s Mending
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/mending] Item.tag.Enchantments[{id:"minecraft:mending"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/multishot] Item.tag.Enchantments[{id:"minecraft:multishot"}].lvl short 1 run scoreboard players get @s Multishot
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/multishot] Item.tag.Enchantments[{id:"minecraft:multishot"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/silk_touch] Item.tag.Enchantments[{id:"minecraft:silk_touch"}].lvl short 1 run scoreboard players get @s SilkTouch
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/silk_touch] Item.tag.Enchantments[{id:"minecraft:silk_touch"}] run tag @s add Enchanted
execute store result entity @s[predicate=ench_limit_break:max_levels/soul_speed] Item.tag.Enchantments[{id:"minecraft:soul_speed"}].lvl short 1 run scoreboard players get @s SoulSpeed
execute if data entity @s[tag=!Enchanted,predicate=ench_limit_break:max_levels/soul_speed] Item.tag.Enchantments[{id:"minecraft:soul_speed"}] run tag @s add Enchanted

execute as @s[tag=SwordEnch] run tag @s add Enchanted
execute as @s[tag=ArmorEnch] run tag @s add Enchanted
execute as @s[tag=ToolEnch] run tag @s add Enchanted
execute as @s[tag=ArmorEnch] run tag @s add Enchanted
execute as @s[tag=ArmorEnch] run tag @s add Enchanted
execute as @s[tag=ToolEnch] run tag @s add Enchanted
execute as @s[tag=TridentEnch] run tag @s add Enchanted
execute as @s[tag=SwordEnch] run tag @s add Enchanted
execute as @s[tag=SwordEnch] run tag @s add Enchanted
execute as @s[tag=FishingRodEnch] run tag @s add Enchanted
execute as @s[tag=FishingRodEnch] run tag @s add Enchanted
execute as @s[tag=CrossbowEnch] run tag @s add Enchanted
execute as @s[predicate=ench_limit_break:bow_or_crossbow] run tag @s add Enchanted
execute as @s[tag=ArmorEnch] run tag @s add Enchanted
execute as @s[tag=ArmorEnch] run tag @s add Enchanted
execute as @s[tag=BowEnch] run tag @s add Enchanted
execute as @s[tag=CrossbowEnch] run tag @s add Enchanted
execute as @s[tag=HelmetEnch] run tag @s add Enchanted
execute as @s[tag=SwordEnch] run tag @s add Enchanted
execute as @s[tag=TridentEnch] run tag @s add Enchanted
execute as @s[tag=SwordEnch] run tag @s add Enchanted
execute as @s[tag=ArmorEnch] run tag @s add Enchanted
execute as @s[tag=MiscEnch] run tag @s add Enchanted
execute as @s[tag=BootsEnch] run tag @s add Enchanted
execute as @s[tag=SwordEnch] run tag @s add Enchanted
execute as @s[tag=BootsEnch] run tag @s add Enchanted
execute as @s[tag=TridentEnch] run tag @s add Enchanted
execute as @s[tag=TridentEnch] run tag @s add Enchanted
execute as @s[tag=SwordEnch,tag=!AxeEnch] run tag @s add Enchanted
execute as @s[tag=HelmetEnch] run tag @s add Enchanted
execute as @s[tag=TridentEnch] run tag @s add Enchanted
execute as @s[predicate=ench_limit_break:bow_or_crossbow] run tag @s add Enchanted
execute as @s[tag=MiscEnch] run tag @s add Enchanted
execute as @s[tag=CrossbowEnch] run tag @s add Enchanted
execute as @s[tag=ToolEnch] run tag @s add Enchanted
execute as @s[tag=BootsEnch] run tag @s add Enchanted

execute as @e[tag=Enchanted,tag=MiscEnch,tag=ench_item] at @s run function ench_limit_break:success
execute as @s[tag=Enchanted,tag=MiscEnch,tag=ench_item] run kill @e[distance=0.001..1,tag=SourceItem]

scoreboard players reset @e[type=item] BaneOfArthropods
scoreboard players reset @e[type=item] BlastProtection
scoreboard players reset @e[type=item] Efficiency
scoreboard players reset @e[type=item] FeatherFalling
scoreboard players reset @e[type=item] FireProtection
scoreboard players reset @e[type=item] Fortune
scoreboard players reset @e[type=item] Impaling
scoreboard players reset @e[type=item] Knockback
scoreboard players reset @e[type=item] Looting
scoreboard players reset @e[type=item] LuckOfTheSea
scoreboard players reset @e[type=item] Lure
scoreboard players reset @e[type=item] Piercing
scoreboard players reset @e[type=item] Power
scoreboard players reset @e[type=item] P.Protection
scoreboard players reset @e[type=item] Protection
scoreboard players reset @e[type=item] Punch
scoreboard players reset @e[type=item] QuickCharge
scoreboard players reset @e[type=item] Respiration
scoreboard players reset @e[type=item] Sharpness
scoreboard players reset @e[type=item] Smite
scoreboard players reset @e[type=item] Thorns
scoreboard players reset @e[type=item] Unbreaking
scoreboard players reset @e[type=item] DepthStrider
scoreboard players reset @e[type=item] FireAspect
scoreboard players reset @e[type=item] FrostWalker
scoreboard players reset @e[type=item] Loyalty
scoreboard players reset @e[type=item] Riptide
scoreboard players reset @e[type=item] Sweeping
scoreboard players reset @e[type=item] AquaAffinity
scoreboard players reset @e[type=item] Channeling
scoreboard players reset @e[type=item] Flame
scoreboard players reset @e[type=item] Infinity
scoreboard players reset @e[type=item] Mending
scoreboard players reset @e[type=item] Multishot
scoreboard players reset @e[type=item] SilkTouch
scoreboard players reset @e[type=item] SoulSpeed
scoreboard players reset @e[type=item] CheckItems

execute if entity @s[nbt={Item:{tag:{Enchantments:[]}}}] run data remove entity @s Item.tag.Enchantments